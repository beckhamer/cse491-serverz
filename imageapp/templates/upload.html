{% extends "base.html" %}

{% block content %}
<b>Upload a PNG or JPEG or TIFF:</b>

<form id='fileform' enctype='multipart/form-data' action='upload_receive' method='POST'>
<table>
  <tr>
    <td>
      <br>Filename:</br>
    </td>
    <td>
      <input type='file' name='file'>
    </td>
  </tr>
  <tr>
    <td>
      <br>Image Name:</br>
    </td>
    <td>
      <input type='text' name='name'>
    </td>
  </tr>
  <tr>
    <td>
      <br>Image Description: </br>
    </td>
    <td>
      <input type='text' name='description'>
    </td>
  </tr>
  <tr>
    <td>
      <input type='submit'>
    </td>
    <td>
    </td>
  </tr>
</table>
</form>

<script>
window.onload = function(){
    var btn = document.getElementById('button');
    btn.onclick = function(ev){
        var the_form = document.forms.namedItem('form');
        alert('clicked!');
        var fd = new FormData(the_form);
        var request = new XMLHttpRequest();
        request.open("POST", "upload_receive", true);
        request.onload = function(event) {
            if (request.status == 200){
                alert('uploaded!');
                window.location = "/";
            } else {
                alert('upload failed :(');
            }
        }
        request.send(fd);
        ev.preventDefault();
    }
}
</script>

{% endblock %}
